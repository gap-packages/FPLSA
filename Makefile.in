#############################################################################
##
##  Global Variables
##
VERSION = 1r1

PKGNAME = fplsa

ARCHIVE = $(PKGNAME)/$(PKGNAME)$(VERSION)

CC=gcc

BINDIR = bin/@GAPARCH@


#############################################################################
##
##  Targets
##
all: src/fplsa4.c
	mkdir -p $(BINDIR)
	$(CC) -o $(BINDIR)/fplsa4 $(CPPFLAGS) $(LDFLAGS) src/fplsa4.c

clean:
	rm -f ../$(ARCHIVE).zoo ../$(ARCHIVE).tar.gz \
           read.co tst/docxpl.tst $(BINDIR)/fplsa4
	( cd doc; rm -f \
          manual.aux manual.bbl manual.blg manual.dvi manual.idl manual.idx \
          manual.ilg manual.ind manual.lab manual.log manual.pdf manual.six \
          manual.toc )

doc: doc/fplsa.tex doc/manual.tex
	cd doc && ./make_doc

Makefile: configure Makefile.in
	./configure "@GAPPATH@"

.PHONY: all clean doc
